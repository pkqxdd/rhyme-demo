'use strict'
/*****************
    	 Summary
    *****************/
    
    /* global navigator*/
	/* global $*/
	
   
	/*********************
       Device Detection
    *********************/

	var isWebkit = /Webkit/i.test(navigator.userAgent),
		isChrome = /Chrome/i.test(navigator.userAgent),
		isMobile = !!("ontouchstart" in window),
		isAndroid = /Android/i.test(navigator.userAgent),
		isIE = document.documentMode;
	

	/******************
    	Redirection
    ******************/

	if (isMobile && isAndroid && !isChrome) {
		alert("Although Velocity.js works on all mobile browsers, this 3D demo is for iOS devices or Android devices running Chrome only. Redirecting you to Velocity's documentation.");
		window.location = "index.html";
	}


	var $container = $("#container"),
		$browserWidthNotice = $("#browserWidthNotice"),
		$welcome = $("#welcome");
	
	var screenWidth = window.screen.availWidth,
		screenHeight = window.screen.availHeight,
		chromeHeight = screenHeight - (document.documentElement.clientHeight || screenHeight);

	
	/* Ensure the user is full-screened; this demo's translations are relative to screen width, not window width. */
	if ((document.documentElement.clientWidth / screenWidth) < 0.80) {
		$browserWidthNotice.show();
	}

	/*****************
        Animation
    *****************/

    /* Fade out the welcome message. */
     /*
   Velocity(
  ball,
  {
    translateY: "130px",
    backgroundColor: ["#222", "#043d99"]
  },
  {
    easing: [1000, 20],
    duration: "2000"
  }
);
*/
	var base  = 10
	function dropObject(type) {
		// var rhym = {"SYL":"triangle",
		// 			"PER":"pentagon",
		// 			"SEM":"hexagon",
		// 			"HEA":"diamond-narrow",
		// 			"IDE":"square", 
		// 			"PAR":"triangle"};
		
		if(type != ""){
			base += 1
			var $drop = $('<div class= "fall triangle" style="z-index:'+base+';" id="'+base +'" > </div>')
			$( "#"+type + "_track" ).prepend($drop)
			$("#"+base).velocity({ translateY: [ function(){return $("#container").height() - 20}, 0 ] }, { duration: 500, display:"none" });
		}
		
	}
	
	
	var song = [["How",3451,"hea",0],["does",3658,"",0],["a",3888,"ide",0],["bast",4119,"",0],["ard,",4537,"",0],["or",4949,"",0],["phan,",5391,"",0],["son",5876,"hea",0],
	["of",6380,"ide",0],["a",6591,"ide",0],["whore",6826,"hea",0],["And",7378,"ide",0],["a",7625,"ide",0],["Scots",7865,"hea",0],["man,",8285,"sem",0],
	["dropped",8780,"sem",0],["in",9260,"ide",0],["the",9481,"ide",0],["midd",9725,"",0],["le",9936,"",0],["of",10162,"ide",0],["a",10397,"ide",0],
	["for",10615,"",0],["got",10930,"",0],["ten",11286,"",0],["spot",11627,"hea",0],["in",12097,"ide",0],["the",12197,"ide",0],["Car",12566,"",0],
	["ibb",12601,"",0],["ean",12808,"",0],["by",13018,"hea",0],["pro",13273,"",0],["vi",13503,"",0],["dence",13743,"",0],["im",14219,"",0],["pov",14439,"",0],
	["er",14688,"",0],["ished",14880,"sem",0],["In",15188,"sem",0],["squa",15667,"S K W AA1",0],["lor,",16109,"per",0],["grow",16364,"syl",0],
	["up",16594,"ide",0],["to",16820,"hea",0],["be",17040,"hea",0],["a",17290,"ide",0],["he",17516,"HH IY1",0],["ro",17746,"syl",0],["and",18000,"ide",0],["a",18208,"ide",0],["scho",18401,"SH OW1",0],
	["lar?",18891,"per",0],["The",19121,"",0],["ten-",19546,"hea",0],["doll",19777,"hea",0],["ar",20224,"hea",0],["foun",20664,"F AW1 N",0],["ding",20828,"per",0],["fa",21002,"hea",0],
	["ther",21261,"hea",0],["with",21466,"W IH1 DH",0],["out",21687,"per",0],["a",21937,"hea",0],["fath",22144,"ide",0],["er",22416,"ide",0],["Got",22633,"per",0],["a",22903,"",0],["lot",23349,"ide",0],["far",23565,"ide",0],
	["ther",23829,"ide",0],["by",24054,"per",0],["work",24275,"ide",0],["ing",24544,"ide",0],["a",24760,"hea",0],["lot",25175,"ide",0],["hard",25404,"ide",0],["er",25682,"ide",0],["By",25908,"",0],["be",26172,"ide",0],
	["ing",26402,"ide",0],["a",26603,"hea",0],["lot",27032,"ide",0],["smar",27328,"ide",0],["ter",27582,"ide",0],["By",27813,"per",0],["be",28058,"ide",0],["ing",28276,"ide",0],["a",28413,"hea",0],["self",28909,"ide",0],["start",29181,"ide",0],["er",29407,"ide",0],["By",29642,"hea",0],
	["four",30098,"hea",0],["teen,",30794,"hea",0],["they",31408,"hea",0],["placed",31587,"",0],["him",31817,"",0],["in",32046,"",0],["charge",32262,"sem",0],["of",32508,"sem",0],["a",32723,"hea",0],["trad",32925,"sem",0],["ing",33141,"sem",0],
	["char",33348,"ide",0],["ter",33848,"ide",0],["And",34133,"",0],["eve",34409,"hea",0],["ry",34582,"hea",0],["day",34884,"sem",0],["while",35148,"sem",0],["slaves",35546,"",0],["were",35829,"hea",0],["be",36050,"hea",0],["ing",36276,"hea",0],["slaugh",36559,"hea",0],["tered",36808,"hea",0],["and",36991,"",0],["car",37361,"hea",0],
	["ted",37525,"hea",0],["a",37658,"ide",0],["way",38081,"ide",0],["A",38302,"hea",0],["cross",38515,"hea",0],["the",38734,"",0],["waves,",39237,"",0],["he",39448,"",0],["strug",39684,"hea",0],["gled",39924,"hea",0],["and",40178,"ide",0],["kept",40399,"hea",0],["his",40601,"ide",0],["guard",40864,"hea",0],["up",41334,"hea",0],["In",41571,"",0],["side,",42069,"",0],["he",42290,"ide",0],["was",42530,"",0],["lon",42742,"hea",0],["ging",42996,"hea",0],["for",43202,"hea",0],["some",43472,"",0],["thing",43693,"",0],["to",43927,"",0],["be",44147,"",0],["a",44388,"ide",0],["part",44633,"hea",0],["of",45050,"ide",0],["The",45160,"",0],["bro",45271,"ide",0],["ther",45376,"ide",0],["was",45631,"hea",0],["rea",45804,"hea",0],["dy",46005,"hea",0],["to",46254,"",0],["beg,",46500,"",0],["steal,",47325,"ide",0],["bor",47526,"hea",0],["row,",47728,"hea",0],["or",47920,"",0],["bar",48127,"hea",0],["ter",48338,"hea",0],["Then",48846,"",0],["a",49077,"hea",0],["hurr",49192,"hea",0],["i",49395,"hea",0],["cane",50257,"hea",0],["came,",50624,"ide",0],["and",50847,"hea",0],["de",51465,"",0],["va",51477,"",0],["sta",51698,"",0],["tion",51969,"sem",0],["reigned",52375,"sem",0],["Our",52639,"hea",0],["man",53286,"",0],["saw",53570,"",0],["his",53815,"",0],["fu",54040,"",0],["ture",54285,"",0],["drip,",54709,"hea",0],["drip",54942,"",0],["ping",55226,"",0],["down",55458,"hea",0],["the",55706,"hea",0],["drain",56263,"hea",0],["Put",56512,"",0],["a",56609,"hea",0],["pen",56872,"hea",0],["cil",57112,"hea",0],["to",57333,"ide",0],["his",57581,"hea",0],["tem",57800,"ide",0],["ple,",58053,"ide",0],["con",58280,"ide",0],["nec",58514,"ide",0],["ted",58773,"ide",0],["it",58980,"hea",0],["to",59210,"",0],["his",59468,"",0],["brain",59896,"hea",0],["And",60304,"ide",0],["he",60443,"per",0],["wrote",60631,"ide",0],["his",60875,"hea",0],["first",61106,"hea",0],["re",61322,"ide",0],["frain,",61758,"ide",0],["a",62042,"",0],["test",62253,"hea",0],["a",62508,"hea",0],["ment",62782,"hea",0],["to",62953,"ide",0],["his",63208,"hea",0],["pain",63578,"hea",0],["Well,",63992,"ide",0],["the",64144,"",0],["word",64610,"hea",0],["got",64842,"hea",0],["a",65100,"hea",0],["round,",65599,"hea",0],["they",65773,"",0],["said,",66006,"",0],["this",66314,"hea",0],["kid",66501,"",0],["is",66731,"hea",0],["in",66981,"hea",0],["sane,",67414,"hea",0],["man",67898,"",0],["Took",68119,"",0],["up",68349,"",0],["a",68604,"hea",0],["coll",68829,"ide",0],["ect",69045,"ide",0],["ion",69295,"ide",0],["just",69516,"ide",0],["to",69746,"per",0],["send",70019,"",0],["him",70226,"ide",0],["to",70461,"",0],["the",70715,"",0],["main",71119,"ide",0],["land",71652,"ide",0],["Get",71858,"",0],["your",72097,"",0],["ed",72318,"EH1 D",0],["u",72549,"Y UW1",0],["cat",72789,"K AE1 T",0],["ion,",73043,"per",0],["don't",73278,"hea",0],["for",73514,"F AO1 R",0],["get",73745,"per",0],["from",73998,"",0],["whence",74224,"hea",0],["you",74554,"hea",0],["came",74922,"hea",0],["And",75373,"hea",0],["the",75480,"",0],["world",75882,"",0],["is",76031,"",0],["go",76276,"hea",0],["nna",76497,"hea",0],["know",76597,"",0],["your",76924,"",0],["name",77621,"hea",0],["What's",77879,"ide",0],["your",78129,"ide",0],["name,",78585,"hea",0],["man?",79169,"ide",0],["A",79375,"ide",0],["lex",79581,"ide",0],["an",79831,"ide",0],["der",80075,"ide",0],["Ham",80291,"hea",0],["il",80527,"hea",0],["ton",82300,"hea",0],["My",82522,"ide",0],["name",82687,"ide",0],["is",82936,"hea",0],["Al",83172,"ide",0],["ex",83407,"ide",0],["an",83603,"ide",0],["der",83893,"ide",0],["Ham",84126,"",0],["il",84376,"",0],["ton",86366,"",0],["And",86466,"ide",0],["there's",86750,"hea",0],["a",86894,"ide",0],["mil",87095,"",0],["li",87306,"",0],["on",87534,"",0],["things",87671,"ide",0],["I",87998,"hea",0],["ha",88099,"",0],["ven't",88266,"",0],["done",88737,"",0],["But",89812,"hea",0],["just",90145,"",0],["you",90605,"",0],["wait,",91598,"ide",0],["just",92020,"ide",0],["you",92562,"hea",0],["wait",93959,"ide",0],["When",94066,"ide",0],["he",94178,"hea",0],["was",94392,"hea",0],["ten",94871,"hea",0],["his",95073,"hea",0],["fa",95183,"hea",0],["ther",95380,"hea",0],["split,",95831,"hea",0],["full",96052,"hea",0],["of",96293,"hea",0],["it,",96744,"hea",0],["debt-",97209,"",0],["rid",97449,"",0],["den",97805,"",0],["Two",97960,"",0],["years",98488,"",0],["la",98680,"ide",0],["ter,",98905,"ide",0],["see",99112,"hea",0],["Al",99357,"",0],["ex",99602,"",0],["and",99823,"",0],["his",100043,"hea",0],["mo",100259,"",0],["ther",100485,"",0],["bed-rid",101263,"sem",0],["den",101570,"sem",0],["Half-dead",102488,"hea",0],["sit",102767,"",0],["tin'",102843,"",0],["in",103064,"",0],["their",103280,"ide",0],["own",103699,"hea",0],["sick,",104216,"",0],["the",104485,"sem",0],["scent",104987,"sem",0],["thick",105277,"sem",0],["And",105642,"sem",0],["A",105733,"hea",0],["lex",106012,"hea",0],["got",106204,"hea",0],["bet",106801,"hea",0],["ter",107062,"hea",0],["but",107280,"sem",0],["his",107523,"sem",0],["mo",107750,"",0],["ther",108008,"",0],["went",108374,"",0],["quick",109805,"hea",0],["Moved",109963,"hea",0],["in",110068,"",0],["with",110179,"hea",0],["a",110428,"hea",0],["cous",110606,"hea",0],["in,",110874,"hea",0],["the",111100,"hea",0],["cous",111325,"sem",0],["in",111590,"sem",0],["com",111820,"ide",0],["mit",112046,"ide",0],["ted",112310,"ide",0],["su",112511,"",0],["i",112791,"",0],["cide",113256,"",0],["Left",113486,"hea",0],["him",113735,"",0],["with",113961,"hea",0],["no",114163,"hea",0],["thin'",114398,"hea",0],["but",114638,"syl",0],["ru",114849,"",0],["ined",115086,"",0],["pride,",115540,"",0],["some",115761,"ide",0],["thing",116001,"ide",0],["new",116237,"hea",0],["in",116481,"",0],["side",116930,"",0],["voice",117398,"",0],["say",117628,"",0],["ing",117869,"",0],["Alex,",118324,"hea",0],["you",118530,"hea",0],["got",118748,"G AA1 T",0],["ta",118998,"syl",0],["fend",119203,"",0],["for",119448,"hea",0],["your",119721,"",0],["self",120081,"",0],["He",120215,"hea",0],["start",120389,"",0],["ed",120609,"",0],["re",120829,"hea",0],["treat",121050,"hea",0],["in'",121296,"hea",0],["and",121530,"hea",0],["read",121713,"hea",0],["in'",121929,"hea",0],["every",122136,"",0],["treat",122361,"hea",0],["ise",122577,"hea",0],["on",122879,"sem",0],["the",123191,"sem",0],["shelf",124082,"hea",0],["There",124221,"",0],["would",124350,"sem",0],["have",124583,"sem",0],["been",124694,"hea",0],["no",124921,"",0],["thin'",125077,"",0],["left",125116,"hea",0],["to",125236,"",0],["do",125347,"hea",0],["for",125476,"",0],["some",125918,"",0],["one",126547,"",0],["less",126652,"hea",0],["a",126859,"hea",0],["stute",127118,"hea",0],["He",127209,"hea",0],["would",127312,"",0],["a",127459,"",0],["been",127715,"",0],["dead",128006,"hea",0],["or",128145,"ide",0],["des",128342,"hea",0],["ti",128548,"hea",0],["tute",128870,"hea",0],["with",129049,"hea",0],["out",129119,"hea",0],["a",129263,"ide",0],["cent",129465,"",0],["of",129662,"hea",0],["res",129907,"",0],["ti",130084,"",0],["tu",130324,"",0],["tion",130850,"",0],["Start",130964,"hea",0],["ed",131198,"hea",0],["wor",131443,"hea",0],["kin',",131654,"hea",0],["cler",132287,"ide",0],["kin'",132571,"ide",0],["for",132758,"hea",0],["his",132969,"ide",0],["late",133372,"",0],["mo",133579,"hea",0],["ther's",134036,"hea",0],["land",134256,"hea",0],["lord",134706,"hea",0],["Tra",134935,"hea",0],["din'",135206,"hea",0],["su",135407,"",0],["gar",135647,"",0],["cane",135956,"",0],["and",136060,"hea",0],["rum",136176,"",0],["and",136329,"hea",0],["all",136506,"",0],["the",136703,"",0],["things",136917,"hea",0],["he",137126,"ide",0],["can't",137367,"",0],["af",137577,"ide",0],["ford",138287,"ide",0],["Scam",138484,"",0],["min'",138710,"",0],["for",138911,"",0],["e",139382,"",0],["ver",139578,"",0],["y",139799,"",0],["book",140098,"hea",0],["he",140236,"hea",0],["can",140472,"",0],["get",140712,"",0],["his",140951,"ide",0],["hands",141359,"",0],["on",141831,"",0],["Plan",142036,"hea",0],["nin'",142267,"hea",0],["for",142473,"hea",0],["the",142701,"",0],["fu",142886,"hea",0],["ture",143116,"hea",0],["see",143341,"hea",0],["him",143606,"",0],["now",144004,"",0],["as",144230,"hea",0],["he",144511,"ide",0],["stands",144882,"hea",0],["on",145113,"hea",0],["the",145375,"hea",0],["bow",145766,"",0],["of",145981,"",0],["a",146235,"hea",0],["ship",146635,"hea",0],["head",146851,"",0],["ed",147092,"",0],["for",147321,"ide",0],["a",147568,"",0],["new",147926,"ide",0],["land",148439,"ide",0],["In",148907,"",0],["New",149262,"hea",0],["York",149683,"",0],["you",149932,"ide",0],["can",150609,"ide",0],["be",150853,"",0],["a",151149,"ide",0],["new",151503,"ide",0],["man",152179,"hea",0],["In",152399,"ide",0],["New",152808,"ide",0],["York",153249,"ide",0],["you",153652,"ide",0],["can",154127,"ide",0],["be",154357,"ide",0],["a",154569,"ide",0],["new",154991,"ide",0],["man",155707,"hea",0],["In",155908,"ide",0],["New",156325,"ide",0],["York",156744,"ide",0],["you",156940,"ide",0],["can",157603,"ide",0],["be",157818,"ide",0],["a",158150,"ide",0],["new",158462,"ide",0],["man",159144,"hea",0],["In",159404,"ide",0],["New",159807,"ide",0],["York",160262,"ide",0],["you",160703,"ide",0],["can",161150,"ide",0],["be",161404,"ide",0],["a",161620,"ide",0],["new",162024,"ide",0],["man",162691,"hea",0],["In",163042,"ide",0],["New",163358,"ide",0],["York",163832,"ide",0],["you",164204,"ide",0],["can",164675,"ide",0],["Just",164681,"ide",0],["you",165141,"ide",0],["wait",165559,"ide",0],["Al",166421,"ide",0],["ex",166686,"ide",0],["and",166925,"ide",0],["er",167166,"ide",0],["Ham",167391,"ide",0],["il",167592,"ide",0],["ton",168805,"ide",0],["We",169632,"ide",0],["are",170049,"",0],["wai",170236,"ide",0],["ting",170378,"ide",0],["in",170505,"hea",0],["the",170682,"",0],["wings",170958,"",0],["for",171307,"hea",0],["you",171610,"",0],["You",173212,"hea",0],["could",173343,"",0],["ne",173586,"",0],["ver",173773,"",0],["back",173985,"hea",0],["down",174444,"",0],["You",174902,"ide",0],["never",175099,"hea",0],["learned",175301,"",0],["to",175929,"ide",0],["take",176165,"",0],["your",176554,"",0],["time",177571,"hea",0],["Oh,",179847,"ide",0],["A",180687,"",0],["lex",180870,"",0],["an",181090,"",0],["der",181311,"",0],["Ham",181556,"hea",0],["il",181767,"hea",0],["ton",182017,"hea",0],["When",183779,"hea",0],["A",183994,"hea",0],["mer",184215,"hea",0],["i",184442,"hea",0],["ca",184666,"hea",0],["sings",185041,"hea",0],["for",185477,"",0],["you",185689,"",0],["Will",187326,"",0],["they",187558,"hea",0],["know",187740,"",0],["what",187836,"",0],["you",188211,"",0],["o",188526,"ide",0],["ver",188872,"ide",0],["came?",189365,"ide",0],["Will",190820,"ide",0],["they",190926,"ide",0],["know",191070,"ide",0],["you",191276,"hea",0],["re",191670,"hea",0],["wrote",191863,"hea",0],["your",192012,"",0],["game?",192424,"ide",0],["The",194270,"hea",0],["world",194428,"hea",0],["will",194534,"hea",0],["ne",195225,"",0],["ver",197072,"",0],["be",198097,"hea",0],["the",198785,"",0],["same,",199647,"ide",0],["oh",200779,"hea",0],["The",200874,"hea",0],["ship",201452,"hea",0],["is",202131,"",0],["in",202280,"ide",0],["the",202500,"hea",0],["har",202714,"",0],["bor",202958,"",0],["now",203131,"ide",0],["See",203605,"",0],["if",203803,"",0],["you",204043,"",0],["can",204259,"ide",0],["spot",204480,"hea",0],["him",204705,"",0],["A",205262,"hea",0],["noth",205828,"hea",0],["er",206045,"hea",0],["im",206289,"HH IH1 M",0],["mi",206505,"sem",0],["grant",206712,"sem",0],["com",206980,"",0],["in'",207145,"",0],["up",207359,"hea",0],["from",207576,"hea",0],["the",207786,"hea",0],["bot",208026,"",0],["tom",208241,"",0],["His",208847,"",0],["e",209001,"IY1",0],["nem",209178,"sem",0],["ies",209377,"sem",0],["de",209606,"",0],["stroyed",209803,"",0],["his",210148,"hea",0],["rep",210249,"",0],["A",210393,"",0],["mer",210657,"",0],["i",210854,"",0],["ca",211098,"",0],["for",211324,"hea",0],["got",211554,"hea",0],["him",211770,"",0],["We",212237,"",0],["fought",212850,"hea",0],["with",213556,"sem",0],["him",213753,"sem",0],["Me,",214185,"hea",0],["I",214641,"ide",0],["died",214868,"hea",0],["for",215299,"hea",0],["him",215524,"hea",0],["Me,",215961,"ide",0],["I",216389,"ide",0],["trust",216643,"ide",0],["ed",217036,"ide",0],["him",217252,"",0],["Me,",217680,"hea",0],["I",218140,"ide",0],["loved",218386,"ide",0],["him",218659,"ide",0],["And",219235,"",0],["me,",219350,"ide",0],["I'm",220099,"ide",0],["the",221069,"ide",0],["damn",221372,"",0],["fool",221461,"ide",0],["that",221548,"ide",0],["shot",221961,"hea",0],["him",222354,"",0],["There's",222839,"hea",0],["a",224054,"",0],["mill",224213,"",0],["i",224318,"",0],["on",224391,"",0],["things",224476,"hea",0],["I",224706,"",0],["hav",224874,"hea",0],["en't",225086,"hea",0],["done",225303,"hea",0],["But",226344,"ide",0],["just",226626,"hea",0],["you",226982,"",0],["wait",227424,"",0],["What's",229797,"hea",0],["your",229989,"",0],["name,",230200,"",0],["man?",230647,"",0],["A",231256,"hea",0],["lex",231400,"hea",0],["an",231606,"hea",0],["der",231817,"hea",0],["Ham",232054,"hea",0],["il",232259,"hea",0],["ton",232505,"hea",0]]
	
	var rhymeColors = {
		"SYL":"#FFF97A",
		"PER":"#21ACF1",
		"SEM":"#FFADAD",
		"HEA":"#EFA5FF",
		"IDE":"#91FF7E",
		"PAR":"#FFDE7E",
		"": "white"
	}
	
	var i= 0
	var start = new Date().getTime()
	function animation(){
		
		for (i = 0;  i < song.length; i++) {
			//console.log(new Date().getTime() - start)
			if(song[i][1] <= new Date().getTime() - start && song[i][3] === 0){
				dropObject(song[i][2].toLocaleUpperCase())
				song[i][3] = 1
				$("#current").text(song[i][0])
				$("#current").css("color", rhymeColors[song[i][2].toLocaleUpperCase()])
			}
		}
		window.requestAnimationFrame(animation);
	}
	window.requestAnimationFrame(animation)
	
var audio = new Audio('hamiltonsong.mp3');
		audio.play();

	
 


